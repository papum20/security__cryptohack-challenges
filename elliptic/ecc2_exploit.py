from sage.all import *

from utils import sum, double, multiply


if __name__ == '__main__':

	p = 9739
	E	= lambda x, y: y**2 % p == (x**3 + 497*x + 1768) % p
	# derivate(x,y) = [x,y]
	dE	= lambda x, y: [2*y % p, (3*x**2 + 497) % p]

	X = (5323, 5438)
	P = (2339, 2213)


	m = multiply([1,2], 5, p, dE)
	print(m)

	mulX = multiply(X, 1337, p, dE)
	print("1337*X:\t", mulX)
	assert mulX == [1089, 6931]

	Q = multiply(P, 7863, p, dE)
	print("7863*P:\t", Q)
	assert E(Q[0], Q[1])

