from sage.all import *

from utils import sum, double


if __name__ == '__main__':

	p = 9739
	E	= lambda x, y: y**2 % p == (x**3 + 497*x + 1768) % p
	# derivate(x,y) = [x,y]
	dE	= lambda x, y: [2*y % p, (3*x**2 + 497) % p]

	X = (5274, 2841)
	Y = (8669, 740)

	P = (493, 5564)
	Q = (1539, 4742)
	R = (4403,5202)

	sumXY = sum(X, Y, p, dE)
	print("X + Y:\t", sumXY)
	assert sumXY == [1024, 4440]
	
	#S(x,y) = P + P + Q + R
	sumPP = sum(P, P, p, dE)
	sumPPQ = sum(sumPP, Q, p, dE)
	S = sum(sumPPQ, R, p, dE)

	print("S:\t", S)
	assert E(S[0], S[1])

